!function(e){e(document).ready(function(){"use strict";let t,s,o,i=e(".js-menu-item"),a=e(".js-sidebar-menu"),n=e(".js-icon-list"),r=e(".js-sidebar-menu-content"),l=e(".js-home-loading"),d=e(".js-show-touchinfo"),c=30,m=!1;cssVars();let u=e("title"),f=u.text(),h=!0;e(window).focus(function(){h=!0,u.text(f),m&&(m=!1,e(".js-slogan").show().addClass("in").removeClass("out"))}).blur(function(){h=!1,function e(){setTimeout(function(){h||(u.text("Geschichte wartet ... – history.first"),setTimeout(function(){h||(u.text(f),e())},3e3))},3e3)}()});let p=.01*window.innerHeight;if(document.documentElement.style.setProperty("--vh",p+"px"),e(window).load(function(){t=e(".home-topic").first().height(),s=e(window).height()-t,o=3*t+s,e(".red-ribbon").css("height",o)}),window.matchMedia("(max-width: 575px)").matches&&(c=15),l.length)if(sessionStorage.getItem("loaded"))l.hide(),g(),d.addClass("active");else{var w=!1;e(window).load(function(){w=!0,sessionStorage.setItem("loaded","true"),d.addClass("active")}),e(".js-slogan").each(function(){e(this).hide().html("Geschichte<br>laden").fadeIn(1e3);var t=new ProgressBar.Circle(".js-progress-circle",{strokeWidth:1,duration:2e3,color:"#FFF",trailColor:"#eee",trailWidth:.4,svgStyle:null});t.animate(1),function e(){setTimeout(function(){t.set(0),w?(t.destroy(),l.fadeOut("slow"),g()):(t.animate(1),e())},2e3)}()})}function v(){let t=e(".js-aside");t.length&&(t.offset().top+t.height()>=t.offset().top-10&&t.addClass("fixed"),e(document).scrollTop()+window.innerHeight<e(".js-footer").offset().top&&t.removeClass("fixed"))}function g(){e(".js-slogan").each(function(){let s=e(this),i=parseInt(s.data("max")),a=2;if(sessionStorage.getItem("loaded")){let e=s.data("word1");s.hide().html(e).fadeIn(1e3),setTimeout(function(){s.addClass("out")},4500)}var n=new ProgressBar.Circle(".js-progress-circle",{strokeWidth:1,duration:5e3,color:"#FFF",trailColor:"#eee",trailWidth:.4,svgStyle:null});n.animate(1),setInterval(function(){let e=s.data("word"+a),r=a-1;0===r&&(r=i);let l=a;1===l&&C(0),2===l&&C(o/2-t/2+c),3===l&&C(o-t+2*c),s.hide().html(e).show().addClass("in").removeClass("out"),h?setTimeout(function(){s.removeClass("in").addClass("out")},4500):(s.hide().removeClass("in").addClass("out"),m=!0),a<i?a++:a=1,n.set(0),n.animate(1)},5e3)})}function C(t){e(".js-ribbon").each(function(){let s=e(this),o=parseFloat(t);s.hasClass("red-ribbon--right")&&(o=-1*parseFloat(t)),s.css("transform","translateY("+o+"px)")})}e(".js-navbar-toggler").on("click",function(){e(".js-animated-menu-icon").toggleClass("open")}),i.mouseenter(function(t){let s=e(this);s.hasClass("active")||function(t,s,o){s=s||!1,o=o||!1;let i=t.data("post"),l=e(".js-sidebar-menu-content[data-post='"+i+"']");l.hasClass("show")?s||(n.find(".active").removeClass("active"),l.removeClass("show"),a.removeClass("open")):o||(a.addClass("open"),n.find(".active").removeClass("active"),t.addClass("active"),r.removeClass("show"),l.addClass("show"))}(s,!0)}),e(document).on("mouseleave",".js-sidebar-menu",function(t){let s=e(this);n.find(".active").removeClass("active"),r.removeClass("show"),s.removeClass("open")}),e(".js-menu-item").click(function(e){e.preventDefault()}),e(".js-arrow-btn").click(function(){let t=e(this).parent();t.hasClass("open-submenu")?(t.removeClass("open-submenu"),t.find(".js-mobile-submenu").removeClass("open").slideUp()):(e(".open-submenu").removeClass("open-submenu"),e(".js-mobile-submenu.open").removeClass("open").slideUp(),t.addClass("open-submenu"),t.find(".js-mobile-submenu").addClass("open").slideDown())}),e(window).resize(function(){window.matchMedia("(max-width: 991px)").matches&&a.removeClass("open"),c=window.matchMedia("(max-width: 575px)").matches?15:30,t=e(".home-topic").first().height(),o=e(".red-ribbon").first().height(),e(".red-ribbon").css("height",o)}),v(),e(document).scroll(function(){v()}),e(".js-redirect").click(function(t){t.preventDefault(),location.href=e(this).find("a:first").attr("href")}),e(".js-inline-svg").each(function(){let t=e(this),s=t.attr("id"),o=t.attr("class"),i=t.attr("src");e.get(i,function(i){let a=e(i).find("svg");void 0!==s&&(a=a.attr("id",s)),void 0!==o&&(a=a.attr("class",o+" replaced-svg")),!(a=a.removeAttr("xmlns:a")).attr("viewBox")&&a.attr("height")&&a.attr("width")&&a.attr("viewBox","0 0 "+a.attr("height")+" "+a.attr("width")),t.replaceWith(a)},"xml")}),window.matchMedia("(min-width: 767px)").matches&&e(".js-parallax").mouseenter(function(){var t,s=e(this).parent().find(".js-progress-circle");s.hasClass("rotate")||(s.addClass("rotate"),t=s,setTimeout(function(){t.removeClass("rotate")},2e3))}),e(".js-img-parallax").each(function(){var t=e(this);e(window).scroll(function(){!function(){if(t.offset().top<e(window).scrollTop()){var s=(e(window).scrollTop()-t.offset().top)/2+"px";t.find("img").css("top",s)}else t.find("img").css("top","0")}()})}),document.addEventListener("wpcf7submit",function(t){e("html, body").animate({scrollTop:e(".wpcf7-form").offset().top},1e3)},!1),e(".js-file").change(function(){e(this)[0].files[0].name;let t=e(".js-file-label"),s=e(".js-upload-limit");e(this)[0].files[0].size>=8e6?(s.addClass("upload"),t.text("Datei ist zu groß").addClass("upload")):s.removeClass("upload")});var j=null,b=[];function x(t){var s=t.find(".js-marker");if(j=L.map(t[0],{minZoom:0,maxZoom:18,zoomSnap:.1,zoomDelta:.5,scrollWheelZoom:!1,touchZoom:!0,dragging:!L.Browser.mobile,fullscreenControl:{pseudoFullscreen:!1}}),L.tileLayer("https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>'}).addTo(j),j.markers=[],e.each(s,function(t,s){!function(t,s){var o=L.icon({iconUrl:"/wp-content/themes/wp_first/img/marker-"+t.attr("data-color")+".svg",iconSize:[32,32],iconAnchor:[17,31],popupAnchor:[0,-17]}),i=L.marker([t.attr("data-lat"),t.attr("data-lng")],{icon:o}).addTo(s);if(e.trim(t.find(".js-info").html())){var a='<div class="map-property clearfix"><p>'+t.find(".js-info").html()+"</p></div>";i.bindPopup(a)}b.push([t.attr("data-lat"),t.attr("data-lng")]),s.markers.push(i)}(jQuery(this),j)}),j.setView([0,0],4),t.data("lines"))L.polyline(b,{color:"#AF3802"}).addTo(j);k(j),j.on("resize",function(){k(j)}),s.remove()}function k(e){if(1==e.markers.length)e.setView(e.markers[0].getLatLng(),12);else{var t=new L.featureGroup(e.markers);e.fitBounds(t.getBounds().pad(.2))}}e(".js-map").each(function(){x(e(this))})})}(jQuery);